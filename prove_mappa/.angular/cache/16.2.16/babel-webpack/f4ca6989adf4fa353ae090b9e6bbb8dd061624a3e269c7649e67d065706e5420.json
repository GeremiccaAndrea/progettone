{"ast":null,"code":"import * as L from 'leaflet'; // Importa Leaflet\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./crimes.service\";\nimport * as i2 from \"@angular/common\";\nfunction AppComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const crimine_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(crimine_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(crimine_r1.arrest);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(crimine_r1.case_number);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(crimine_r1.date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(crimine_r1.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(crimine_r1.domestic);\n  }\n}\nexport class AppComponent {\n  constructor(crimesService) {\n    this.crimesService = crimesService;\n  }\n  ngOnInit() {\n    this.initMap();\n    this.loadData(); // Carica il file GeoJSON\n  }\n  // Funzione per inizializzare la mappa\n  initMap() {\n    this.map = L.map('map', {\n      center: [41.816813771373916, -87.60670812560372],\n      zoom: 14\n    });\n    // Aggiungi il layer di base di OpenStreetMap\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(this.map);\n  }\n  // Funzione per caricare i dati (crimini e distretti) da un file GeoJSON\n  loadData() {\n    this.crimesService.getCrimes().subscribe(data => {\n      // Assicurati che data sia un FeatureCollection\n      if (data.type === \"FeatureCollection\" && Array.isArray(data.features)) {\n        this.geojsonData = data;\n        this.addDistrictsToMap(this.geojsonData);\n      } else {\n        console.error(\"Formato GeoJSON non valido\", data);\n      }\n    }, error => {\n      console.error('Errore nel recupero dei dati:', error);\n    });\n  }\n  // Funzione per determinare il colore in base al numero di crimini\n  getCrimeColor(crimeCount) {\n    const maxCrimeCount = 62; // Numero massimo di crimini per la scala dei colori\n    const minCrimeCount = 0; // Numero minimo di crimini\n    const midCrimeCount = (maxCrimeCount - minCrimeCount) / 2; // Punto medio\n    let r = 0,\n      g = 0,\n      b = 0;\n    if (crimeCount <= midCrimeCount) {\n      // Colori dalla verde (basso) al giallo (medio)\n      const greenToYellowRatio = crimeCount / midCrimeCount;\n      g = Math.floor(255 * (1 - greenToYellowRatio)); // Decresce il verde\n      r = Math.floor(255 * greenToYellowRatio); // Aumenta il rosso\n      b = 0;\n    } else {\n      // Colori dal giallo al rosso (alto)\n      const yellowToRedRatio = (crimeCount - midCrimeCount) / (maxCrimeCount - midCrimeCount);\n      r = Math.floor(255 * yellowToRedRatio); // Aumenta il rosso\n      g = Math.floor(255 * (1 - yellowToRedRatio)); // Diminuisce il verde\n      b = 0;\n    }\n    return `rgb(${r},${g},${b})`;\n  }\n  // Funzione per aggiungere i distretti con il numero di crimini alla mappa\n  addDistrictsToMap(data) {\n    L.geoJSON(data, {\n      style: feature => {\n        const crimeCount = feature.properties?.crime_count || 0;\n        const color = this.getCrimeColor(crimeCount); // Otteniamo il colore in base al numero di crimini\n        return {\n          color: color,\n          weight: 2,\n          opacity: 1 // Border opacity\n        };\n      },\n\n      onEachFeature: (feature, layer) => {\n        // Check for the required properties to avoid undefined errors\n        const neighborhood = feature.properties?.pri_neigh || \"Unknown\";\n        const crimeCount = feature.properties?.crime_count || 0;\n        layer.bindPopup(`\n          <strong>${neighborhood}</strong><br/>\n          Crimini: ${crimeCount}`);\n        layer.on('click', () => {\n          console.log(neighborhood);\n          this.crimesService.getCriminiByNeigh(neighborhood).subscribe(data => {\n            console.log(data); // Mostra i dati recuperati nella console\n            this.crimini = data; // Salva i dati dei crimini del quartiere cliccato \n            // Trasforma i dati in un array di oggetti\n            const keys = Object.keys(this.crimini.id); // Usa una delle proprietà principali per le chiavi (ad esempio \"id\")\n            this.formattedData = keys.map(key => ({\n              id: this.crimini.id[key],\n              arrest: this.crimini.arrest[key],\n              case_number: this.crimini.case_number[key],\n              date: this.crimini.date[key],\n              description: this.crimini.description[key],\n              domestic: this.crimini.domestic[key]\n            }));\n            console.log(this.formattedData);\n          });\n        });\n      }\n    }).addTo(this.map); // Aggiungi il layer alla mappa\n  }\n\n  static {\n    this.ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.CrimesService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      decls: 22,\n      vars: 1,\n      consts: [[\"id\", \"map\", 2, \"height\", \"800px\", \"border-color\", \"#4169e1\", \"border-width\", \"5px\"], [\"border\", \"1\", 2, \"width\", \"100%\", \"border-collapse\", \"collapse\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"div\", 0)(1, \"br\");\n          i0.ɵɵelementStart(2, \"div\")(3, \"h2\");\n          i0.ɵɵtext(4, \"Tabella dei Crimini\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"table\", 1)(6, \"thead\")(7, \"tr\")(8, \"th\");\n          i0.ɵɵtext(9, \"ID\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"th\");\n          i0.ɵɵtext(11, \"Arresto\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"th\");\n          i0.ɵɵtext(13, \"Numero Caso\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"th\");\n          i0.ɵɵtext(15, \"Data\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"th\");\n          i0.ɵɵtext(17, \"Descrizione\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"th\");\n          i0.ɵɵtext(19, \"Domestico\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"tbody\");\n          i0.ɵɵtemplate(21, AppComponent_tr_21_Template, 13, 6, \"tr\", 2);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(21);\n          i0.ɵɵproperty(\"ngForOf\", ctx.formattedData);\n        }\n      },\n      dependencies: [i2.NgForOf],\n      styles: [\"#map[_ngcontent-%COMP%] {\\n  height: calc(100vh - 70px); \\n\\n  width: 100%;\\n}\\n.btn-add[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 20px;\\n  right: 20px;\\n  width: 50px;\\n  height: 50px;\\n  font-size: 24px;\\n  border-radius: 50%;\\n  background-color: #007bff; \\n\\n  color: white;\\n}\\n.switch-container[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 20px;\\n  left: 20px;\\n}\\n\\n\\ndiv[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  background-color: #f4f4f9;\\n  border-radius: 8px;\\n  margin: 20px auto;\\n  max-width: 90%;\\n  overflow-x: auto;\\n}\\n\\n\\n\\nh2[_ngcontent-%COMP%] {\\n  font-size: 1.8rem;\\n  color: #333;\\n  margin-bottom: 20px;\\n  text-align: center;\\n}\\n\\n\\n\\ntable[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-collapse: collapse;\\n  font-family: Arial, sans-serif;\\n  background-color: #fff;\\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\\n  border-color: #4169e1;\\n  border-width: 5px;\\n}\\n\\n\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  padding: 12px 15px;\\n  text-align: left;\\n  border-bottom: 1px solid #ddd;\\n}\\n\\n\\n\\nthead[_ngcontent-%COMP%] {\\n  background-color: #4CAF50;\\n  color: white;\\n}\\n\\ntbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even) {\\n  background-color: #f9f9f9;\\n}\\n\\ntbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) {\\n  background-color: #ffffff;\\n}\\n\\n\\n\\ntbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover {\\n  background-color: #f1f1f1;\\n}\\n\\n\\n\\ntd[_ngcontent-%COMP%] {\\n  font-weight: normal;\\n}\\n\\ntd[_ngcontent-%COMP%]:nth-child(2), td[_ngcontent-%COMP%]:nth-child(6) {\\n  font-style: italic;\\n  color: #4CAF50; \\n\\n}\\n\\n\\n\\n@media (max-width: 768px) {\\n  table[_ngcontent-%COMP%] {\\n    font-size: 14px;\\n  }\\n\\n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n    padding: 8px 10px;\\n  }\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  background-color: #f6f6f6;\\n}\\n\\np[_ngcontent-%COMP%] {\\n  font-family: 'Product Sans';\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQkFBMEIsRUFBRSxpREFBaUQ7RUFDN0UsV0FBVztBQUNiO0FBQ0E7RUFDRSxlQUFlO0VBQ2YsWUFBWTtFQUNaLFdBQVc7RUFDWCxXQUFXO0VBQ1gsWUFBWTtFQUNaLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIseUJBQXlCLEVBQUUsZUFBZTtFQUMxQyxZQUFZO0FBQ2Q7QUFDQTtFQUNFLGVBQWU7RUFDZixZQUFZO0VBQ1osVUFBVTtBQUNaO0FBQ0Esb0RBQW9EO0FBQ3BEO0VBQ0UsYUFBYTtFQUNiLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsaUJBQWlCO0VBQ2pCLGNBQWM7RUFDZCxnQkFBZ0I7QUFDbEI7O0FBRUEseUJBQXlCO0FBQ3pCO0VBQ0UsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCOztBQUVBLGtDQUFrQztBQUNsQztFQUNFLFdBQVc7RUFDWCx5QkFBeUI7RUFDekIsOEJBQThCO0VBQzlCLHNCQUFzQjtFQUN0Qix5Q0FBeUM7RUFDekMscUJBQXFCO0VBQ3JCLGlCQUFpQjtBQUNuQjs7QUFFQSwrQ0FBK0M7QUFDL0M7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLDZCQUE2QjtBQUMvQjs7QUFFQSxnREFBZ0Q7QUFDaEQ7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtBQUNkOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBLDRDQUE0QztBQUM1QztFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQSx1Q0FBdUM7QUFDdkM7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsY0FBYyxFQUFFLHVEQUF1RDtBQUN6RTs7QUFFQSwrQ0FBK0M7QUFDL0M7RUFDRTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7QUFDRjs7QUFFQTtFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLDJCQUEyQjtBQUM3QiIsInNvdXJjZXNDb250ZW50IjpbIiNtYXAge1xuICBoZWlnaHQ6IGNhbGMoMTAwdmggLSA3MHB4KTsgLyogQWx0ZXp6YSBjb21wbGV0YSBkZWxsbyBzY2hlcm1vIG1lbm8gbCdoZWFkZXIgKi9cbiAgd2lkdGg6IDEwMCU7XG59XG4uYnRuLWFkZCB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAyMHB4O1xuICByaWdodDogMjBweDtcbiAgd2lkdGg6IDUwcHg7XG4gIGhlaWdodDogNTBweDtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7IC8qIENvbG9yZSBibHUgKi9cbiAgY29sb3I6IHdoaXRlO1xufVxuLnN3aXRjaC1jb250YWluZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGJvdHRvbTogMjBweDtcbiAgbGVmdDogMjBweDtcbn1cbi8qIFN0aWxpIGdlbmVyYWxpIHBlciBpbCBjb250ZW5pdG9yZSBkZWxsYSB0YWJlbGxhICovXG5kaXYge1xuICBwYWRkaW5nOiAyMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY5O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIG1hcmdpbjogMjBweCBhdXRvO1xuICBtYXgtd2lkdGg6IDkwJTtcbiAgb3ZlcmZsb3cteDogYXV0bztcbn1cblxuLyogVGl0b2xvIGRlbGxhIHRhYmVsbGEgKi9cbmgyIHtcbiAgZm9udC1zaXplOiAxLjhyZW07XG4gIGNvbG9yOiAjMzMzO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi8qIFN0aWxpIGdlbmVyYWxpIHBlciBsYSB0YWJlbGxhICovXG50YWJsZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICBib3JkZXItY29sb3I6ICM0MTY5ZTE7XG4gIGJvcmRlci13aWR0aDogNXB4O1xufVxuXG4vKiBTdGlsaSBwZXIgbGUgY2VsbGUgZGVsbGEgdGFiZWxsYSAodGggZSB0ZCkgKi9cbnRoLCB0ZCB7XG4gIHBhZGRpbmc6IDEycHggMTVweDtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7XG59XG5cbi8qIENvbG9yaSBkaSBzZm9uZG8gcGVyIGxlIHJpZ2hlIGRlbGxhIHRhYmVsbGEgKi9cbnRoZWFkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzRDQUY1MDtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG50Ym9keSB0cjpudGgtY2hpbGQoZXZlbikge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xufVxuXG50Ym9keSB0cjpudGgtY2hpbGQob2RkKSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG59XG5cbi8qIEVmZmV0dG8gaG92ZXIgc3VsbGUgcmlnaGUgZGVsbGEgdGFiZWxsYSAqL1xudGJvZHkgdHI6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxO1xufVxuXG4vKiBTdGlsaSBwZXIgaSBjYW1waSBib29sZWFuaSAoU8ODwqwvTm8pICovXG50ZCB7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG5cbnRkOm50aC1jaGlsZCgyKSwgdGQ6bnRoLWNoaWxkKDYpIHtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xuICBjb2xvcjogIzRDQUY1MDsgLyogVmVyZGUgcGVyIGkgXCJTw4PCrFwiLCBwdW9pIG1vZGlmaWNhcmxvIGNvbWUgcHJlZmVyaXNjaSAqL1xufVxuXG4vKiBSZXNwb25zaXZlIERlc2lnbjogdGFiZWxsYSBtb2JpbGUtZnJpZW5kbHkgKi9cbkBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICB0YWJsZSB7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICB9XG5cbiAgdGgsIHRkIHtcbiAgICBwYWRkaW5nOiA4cHggMTBweDtcbiAgfVxufVxuXG5ib2R5IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y2ZjZmNjtcbn1cblxucCB7XG4gIGZvbnQtZmFtaWx5OiAnUHJvZHVjdCBTYW5zJztcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["L","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","crimine_r1","id","arrest","case_number","date","description","domestic","AppComponent","constructor","crimesService","ngOnInit","initMap","loadData","map","center","zoom","tileLayer","attribution","addTo","getCrimes","subscribe","data","type","Array","isArray","features","geojsonData","addDistrictsToMap","console","error","getCrimeColor","crimeCount","maxCrimeCount","minCrimeCount","midCrimeCount","r","g","b","greenToYellowRatio","Math","floor","yellowToRedRatio","geoJSON","style","feature","properties","crime_count","color","weight","opacity","onEachFeature","layer","neighborhood","pri_neigh","bindPopup","on","log","getCriminiByNeigh","crimini","keys","Object","formattedData","key","ɵɵdirectiveInject","i1","CrimesService","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelement","ɵɵtemplate","AppComponent_tr_21_Template","ɵɵproperty"],"sources":["/workspace/progettone/prove_mappa/src/app/app.component.ts","/workspace/progettone/prove_mappa/src/app/app.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CrimesService } from './crimes.service';\nimport * as L from 'leaflet';  // Importa Leaflet\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  geojsonData:any; // Dati GeoJSON che contengono sia la geometria che il numero di crimini\n  crimini: any;\n  formattedData: any;\n\n  constructor(private crimesService: CrimesService) { }\n\n  map!: L.Map;\n\n  ngOnInit(): void {\n    this.initMap();\n    this.loadData(); // Carica il file GeoJSON\n  }\n\n  // Funzione per inizializzare la mappa\n  initMap(): void {\n    this.map = L.map('map', {\n      center: [41.816813771373916, -87.60670812560372],  // Coordinate centrali per Chicago\n      zoom: 14\n    });\n\n    // Aggiungi il layer di base di OpenStreetMap\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(this.map);\n  }\n\n  // Funzione per caricare i dati (crimini e distretti) da un file GeoJSON\n  loadData(): void {\n    this.crimesService.getCrimes().subscribe(\n      (data) => {\n        // Assicurati che data sia un FeatureCollection\n        if (data.type === \"FeatureCollection\" && Array.isArray(data.features)) {\n          this.geojsonData = data;\n          this.addDistrictsToMap(this.geojsonData);\n        } else {\n          console.error(\"Formato GeoJSON non valido\", data);\n        }\n      },\n      (error) => {\n        console.error('Errore nel recupero dei dati:', error);\n      }\n    );\n  }\n  // Funzione per determinare il colore in base al numero di crimini\n  getCrimeColor(crimeCount: number): string {\n    const maxCrimeCount = 62;  // Numero massimo di crimini per la scala dei colori\n    const minCrimeCount = 0;   // Numero minimo di crimini\n    const midCrimeCount = (maxCrimeCount - minCrimeCount) / 2;  // Punto medio\n\n    let r = 0, g = 0, b = 0;\n\n    if (crimeCount <= midCrimeCount) {\n      // Colori dalla verde (basso) al giallo (medio)\n      const greenToYellowRatio = crimeCount / midCrimeCount;\n      g = Math.floor(255 * (1 - greenToYellowRatio)); // Decresce il verde\n      r = Math.floor(255 * greenToYellowRatio);      // Aumenta il rosso\n      b = 0;\n    } else {\n      // Colori dal giallo al rosso (alto)\n      const yellowToRedRatio = (crimeCount - midCrimeCount) / (maxCrimeCount - midCrimeCount);\n      r = Math.floor(255 * yellowToRedRatio);  // Aumenta il rosso\n      g = Math.floor(255 * (1 - yellowToRedRatio));  // Diminuisce il verde\n      b = 0;\n    }\n\n    return `rgb(${r},${g},${b})`;\n  }\n\n  // Funzione per aggiungere i distretti con il numero di crimini alla mappa\n  addDistrictsToMap(data: any): void {\n    L.geoJSON(data, {\n      style: (feature: any) => {\n        const crimeCount = feature.properties?.crime_count || 0;\n        const color = this.getCrimeColor(crimeCount); // Otteniamo il colore in base al numero di crimini\n        \n        return {\n          color: color,   // Border color\n          weight: 2,       // Border thickness\n          opacity: 1       // Border opacity\n        };\n      },\n      onEachFeature: (feature, layer) => {\n        // Check for the required properties to avoid undefined errors\n        const neighborhood = feature.properties?.pri_neigh || \"Unknown\";\n        const crimeCount = feature.properties?.crime_count || 0;\n        layer.bindPopup(`\n          <strong>${neighborhood}</strong><br/>\n          Crimini: ${crimeCount}`);\n        layer.on('click',()=>{\n          console.log(neighborhood);\n          this.crimesService.getCriminiByNeigh(neighborhood).subscribe(data => {\n            console.log(data); // Mostra i dati recuperati nella console\n            this.crimini = data; // Salva i dati dei crimini del quartiere cliccato \n            // Trasforma i dati in un array di oggetti\n            const keys = Object.keys(this.crimini.id); // Usa una delle proprietà principali per le chiavi (ad esempio \"id\")\n            this.formattedData = keys.map(key => ({\n              id: this.crimini.id[key],\n              arrest: this.crimini.arrest[key],\n              case_number: this.crimini.case_number[key],\n              date: this.crimini.date[key],\n              description: this.crimini.description[key],\n              domestic: this.crimini.domestic[key],\n            }));\n\n            console.log(this.formattedData);\n          });\n        });\n      }\n    }).addTo(this.map); // Aggiungi il layer alla mappa\n  }\n}","<div id=\"map\" style=\"height: 800px; border-color: #4169e1; border-width: 5px;\"></div>\n<br>\n<div>\n    <h2>Tabella dei Crimini</h2>\n    <table border=\"1\" style=\"width: 100%; border-collapse: collapse;\">\n        <thead>\n        <tr>\n            <th>ID</th>\n            <th>Arresto</th>\n            <th>Numero Caso</th>\n            <th>Data</th>\n            <th>Descrizione</th>\n            <th>Domestico</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr *ngFor=\"let crimine of formattedData\">\n            <td>{{ crimine.id }}</td>\n            <td>{{ crimine.arrest}}</td>\n            <td>{{ crimine.case_number }}</td>\n            <td>{{ crimine.date}}</td>\n            <td>{{ crimine.description }}</td>\n            <td>{{ crimine.domestic}}</td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n      \n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}